@using RimDialogueLocal
@using RimDialogueObjects
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "_Layout";
}

@section Head {
  <meta http-equiv="refresh" content="30">
}

<h1>RimDialogue</h1>

<h2>Server Stats as of @DateTime.Now</h2>
<dl>
  <dt>
    Start Time
  </dt>
  <dd>
    @Metrics.StartTime
  </dd>
  <dt>
    Uptime
  </dt>
  <dd>
    @Metrics.GetUpTime()
  </dd>
  <dt>
    Total Errors
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.TotalErrors.ToString("N0")
  </dd>
  <dt>
    Total Requests
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.RequestCount.ToString("N0")
  </dd>
  <dt>
    Request Per Minute
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.RequestsPerMinute.ToString("N0")
  </dd>
  <dt>
    Total Input Length
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.TotalInputLength.ToString("N0")
  </dd>
  <dt>
    Average Input Length
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.AverageInputLength.ToString("N0")
  </dd>
  <dt>
    Average Input Per Minute
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.AverageInputPerMinute.ToString("N0")
  </dd>
  <dt>
    Total Output Length
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.TotalOutputLength.ToString("N0")
  </dd>
  <dt>
    Average Output Length
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.AverageOutputLength.ToString("N0")
  </dd>
  <dt>
    Average Output Per Minute
  </dt>
  <dd>
    @Metrics.metricsData.serverMetrics.AverageOutputPerMinute.ToString("N0")
  </dd>
  <dt>
    Distinct IP Count
  </dt>
  <dd>
    @Metrics.DistinctIPCount.ToString("N0")
  </dd>
  <dt>
    Average Requests Per IP
  </dt>
  <dd>
    @Metrics.AverageRequestsPerIP.ToString("N0")
  </dd>
  <dt>
    Top 10 Requesters
  </dt>
  <dd>
    <ul>
      @foreach (var ip in Metrics.GetTopRequesters(10))
      {
        <li>@ip.Key - @ip.Value.ToString("N0")</li>
      }
    </ul>
  </dd>
  <dt>
    Top 10 Requesters By Input
  </dt>
  <dd>
    <ul>
      @foreach (var ip in Metrics.GetTopRequestersByInput(10))
      {
        <li>@ip.Key - @ip.Value.ToString("N0")</li>
      }
    </ul>
  </dd>
  <dt>
    Top 10 Requesters By Output
  </dt>
  <dd>
    <ul>
      @foreach (var ip in Metrics.GetTopRequestersByOutput(10))
      {
        <li>@ip.Key - @ip.Value.ToString("N0")</li>
      }
    </ul>
  </dd>
</dl>

